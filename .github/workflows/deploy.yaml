name: üöÄ Deploy Symfony App via FTP

# D√©clenchement √† chaque push sur la branche main
on:
  push:
    branches:
      - main

jobs:
  ftp-deploy:
    runs-on: ubuntu-latest

    steps:
      # √âtape 1 : Cloner le d√©p√¥t pour r√©cup√©rer le code
      - name: Checkout repository
        uses: actions/checkout@v4

      # √âtape 2 : D√©ployer via FTP le contenu du dossier `app/`
      - name: Deploy app/ folder via FTP
        uses: SamKirkland/FTP-Deploy-Action@4.3.0
        with:
          server: ftp.jobmakombela.fr         # Remplace par ton serveur FTP
          username: ${{ secrets.FTP_USERNAME }}  # Identifiant FTP stock√© dans les secrets GitHub
          password: ${{ secrets.FTP_PASSWORD }}  # Mot de passe FTP stock√© dans les secrets GitHub
          local-dir: app/                      # Dossier local √† envoyer
          remote-dir: /sites/jobmakombela.fr                      # R√©pertoire racine FTP (adapter si besoin)
          git-ftp-args: --insecure           # Optionnel : ignore les probl√®mes SSL (√† ajuster selon ton serveur)
